(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0ab43a"],{1511:function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"container py-5"},[r("UserProfileCard",{attrs:{user:e.users,comments:e.comments,favoritedRestaurants:e.favoritedRestaurants,followers:e.followers,followings:e.followings,"initial-isfollowed":e.isFollowed,"current-user":e.currentUser}}),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-4"},[r("UserFollowingsCard",{attrs:{followings:e.followings}}),r("UserFollowersCard",{attrs:{followers:e.followers}})],1),r("div",{staticClass:"col-md-8"},[r("UserCommentsCard",{attrs:{comments:e.comments}}),r("UserFavoritedRestaurantsCard",{attrs:{favoritedRestaurants:e.favoritedRestaurants}})],1)])],1)},a=[],i=r("1da1"),n=r("5530"),o=(r("96cf"),r("d9e2"),r("b0c0"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"row no-gutters"},[r("div",{staticClass:"col-md-4"},[r("img",{attrs:{src:e.user.image,width:"300px",height:"300px",alt:""}})]),r("div",{staticClass:"col-md-8"},[r("div",{staticClass:"card-body"},[r("h5",{staticClass:"card-title"},[e._v(" "+e._s(e.user.name)+" ")]),r("p",{staticClass:"card-text"},[e._v(" "+e._s(e.user.email)+" ")]),r("ul",{staticClass:"list-unstyled"},[r("li",[e._v(e._s(e.comments.length)),r("strong"),e._v("已評論餐廳")]),r("li",[r("strong",[e._v(e._s(e.favoritedRestaurants.length))]),e._v("收藏的餐廳 ")]),r("li",[r("strong",[e._v(e._s(e.followers.length))]),e._v("followings (追蹤者) ")]),r("li",[r("strong",[e._v(e._s(e.followings.length))]),e._v("followers (追隨者) ")])]),r("div",[e.currentUser.id?[r("router-link",{staticClass:"btn btn-primary",attrs:{to:{name:"user-edit",params:{id:e.user.id}}}},[e._v(" Edit ")])]:[e.isFollowed?r("button",{staticClass:"btn btn-primary",attrs:{to:{name:"user",params:{id:e.user.id}}},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.deleteFollowing(e.user.id)}}},[e._v(" 取消追蹤 ")]):r("button",{staticClass:"btn btn-primary",attrs:{to:{name:"user",params:{id:e.user.id}}},on:{click:function(t){return t.stopPropagation(),t.preventDefault(),e.addFollowing(e.user.id)}}},[e._v(" 追蹤 ")])]],2)])])])])}),l=[],c=r("4cce"),d=r("2fa3"),u={props:{user:{type:Object,required:!0},comments:{type:Array,required:!0},favoritedRestaurants:{type:Array,required:!0},followers:{type:Array,required:!0},followings:{type:Array,required:!0},initialIsfollowed:{type:Boolean,required:!0},currentUser:{type:Object,required:!0}},data:function(){return{isFollowed:this.initialIsfollowed}},watch:{initialIsfollowed:function(e){this.isFollowed=e}},methods:{addFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].addFollowing({userId:e});case 3:if(s=r.sent,a=s.data,"success"===a.status){r.next=7;break}throw new Error(a.message);case 7:t.isFollowed=!0,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),d["a"].fire({icon:"error",title:"目前無法追隨"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()},deleteFollowing:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].deleteFollowing({userId:e});case 3:if(s=r.sent,a=s.data,"success"===a.status){r.next=7;break}throw new Error(a.message);case 7:t.isFollowed=!1,r.next=13;break;case 10:r.prev=10,r.t0=r["catch"](0),d["a"].fire({icon:"error",title:"目前無法解除追隨"});case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()}}},m=u,f=r("2877"),v=Object(f["a"])(m,o,l,!1,null,null,null),w=v.exports,g=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card mb-3"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.followings.length))]),e._v(" followings ")]),r("div",{staticClass:"card-body"},e._l(e.followings,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"user",params:{id:e.id}}}},[r("img",{staticClass:"mr-1",attrs:{src:e.image,width:"60",height:"60"}})])})),1)])},p=[],h={props:{followings:{type:Array,required:!0}}},_=h,b=Object(f["a"])(_,g,p,!1,null,null,null),C=b.exports,y=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.followers.length))]),e._v(" followers(追隨者) ")]),r("div",{staticClass:"card-body"},e._l(e.followers,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"user",params:{id:e.id}}}},[r("img",{staticClass:"mr-1",attrs:{src:e.image,width:"60",height:"60"}})])})),1)])},F=[],k={props:{followers:{tpye:Array,required:!0}}},R=k,x=Object(f["a"])(R,y,F,!1,null,null,null),U=x.exports,j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.comments.length))]),e._v(" 已評論餐廳 ")]),r("div",{staticClass:"card-body"},e._l(e.comments,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.id}}}},[r("img",{staticClass:"mr-1 mb-1",attrs:{src:e.Restaurant.image,width:"60",height:"60"}})])})),1)])},O=[],A={props:{comments:{type:Array,required:!0}}},q=A,E=Object(f["a"])(q,j,O,!1,null,null,null),$=E.exports,I=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"card"},[r("div",{staticClass:"card-header"},[r("strong",[e._v(e._s(e.favoritedRestaurants.length))]),e._v(" 收藏的餐廳 ")]),r("div",{staticClass:"card-body"},e._l(e.favoritedRestaurants,(function(e){return r("router-link",{key:e.id,attrs:{to:{name:"restaurant",params:{id:e.id}}}},[r("img",{staticClass:"mr-1 mb-1",attrs:{src:e.image,width:"60",height:"60"}})])})),1)])},P=[],D={props:{favoritedRestaurants:{type:Array,required:!0}}},J=D,B=Object(f["a"])(J,I,P,!1,null,null,null),z=B.exports,G=r("2f62"),H={components:{UserProfileCard:w,UserFollowingsCard:C,UserFollowersCard:U,UserCommentsCard:$,UserFavoritedRestaurantsCard:z},data:function(){return{users:{id:-1,name:"root",email:"",isAdmin:!0,image:"",createdAt:""},comments:[],favoritedRestaurants:[],followers:[],followings:[],isFollowed:!1}},created:function(){var e=this.$route.params.id;this.fetehUsers(e)},beforeRouteUpdate:function(e,t,r){var s=e.params.id;this.fetehUsers(s),r()},computed:Object(n["a"])({},Object(G["b"])(["currentUser"])),methods:{fetehUsers:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,a,i,o,l,u,m,f,v,w,g,p;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,c["a"].get({userId:e});case 3:if(s=r.sent,a=s.data,"error"!==a.status){r.next=7;break}throw new Error(a.message);case 7:i=a.profile,o=i.id,l=i.name,u=i.email,m=i.image,f=i.createdAt,v=i.Comments,w=i.FavoritedRestaurants,g=i.Followers,p=i.Followings,t.users=Object(n["a"])(Object(n["a"])({},t.users),{},{id:o,name:l,email:u,image:m,createdAt:f}),t.comments=v.length?v:[],t.favoritedRestaurants=w.length?w:[],t.followers=g.length?g:[],t.followings=p.length?p:[],t.isFollowed=a.isFollowed,r.next=19;break;case 16:r.prev=16,r.t0=r["catch"](0),d["a"].fire({icon:"error",title:"目前無法取得使用者資料"});case 19:case"end":return r.stop()}}),r,null,[[0,16]])})))()}}},K=H,L=Object(f["a"])(K,s,a,!1,null,null,null);t["default"]=L.exports}}]);
//# sourceMappingURL=chunk-2d0ab43a.fe67bd1f.js.map